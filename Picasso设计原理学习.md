## Picasso
#### 谈到框架的学习,本人特别喜欢阅读源码,因为每次看优秀的框架代码,就知道自己平时写的代码好SB
#### 平时看一些源码分析的体会
1. 容易陷入代码细节,细节很重要,但作为学习框架,设计哲学真的很重要,否则很容易代码单拿出一处都读的懂,
   但是不知道作者为什么这样设计这个结构呢.
2. 直接画一画逻辑图,把类之间的关系画一画,确实能搞清楚不少,但总觉着离捅破窗户纸差了一点.

#### 如果我们自己想设计一个图片加载框架,我们需要做些什么呢?都需要完成什么样的工作呢? 我简单列举一下:
* 要有下载功能(download),这是都能想到的,没有下载怎么加载
* 下载功能有了，要有存储功能,在这些框架中也叫Cache,根据复杂程度可以分很多层,原理差不多，基本都会用到LRUCache
* 存储也有了，很容易想到,我需要展示, 那么展示就涉及到很多细节了,剪裁,缩放,图片样式,是不是Gif图等等,这样就会自然涉及到图片处理
* 基本三大块都有了，那么还有就是怎么把这些模块联系起来,怎么在各模块之间传递消息,因为除了渲染imageview必须在主线程完成之外,
其他功能都应该在其他线程完成，下载，存储,图片处理之类，那么看来必须要用到Executor框架了,因为java多线程编程框架为我们处理好了很多事情，
几乎所有的主流框架都离不开用到这个,创建线程池,管理线程,选择队列等等.
#### 知道自己想要什么了,是时候设计了,首先要设计调用方式,肯定是先有了调用方式,再开始采取设计模式吧
```
阅读了这么多框架，如果你需要初始化的参数特别多,基本都会采取建造者(Build)模式,因为那么多参数，你不可能要用户一个一个去set方法设置的，自己想想也
调用起来很难受.(picasso中的单例里的Build构造器)
而且我说了，既然都是框架了,每一个模块你最起码要自己有个实现吧,也就是默认实现,但有的用户如果说要按照自己的意愿定制怎么办，你什么都写的挺好，但人家没法
定制,每次定制就把你源码改一回也不合适吧，所以有定制需求的地方一定要面向接口编程(picasso中的downloader)
```
#### 既然有多线程问题,就免不了涉及线程通信设计
picasso采用了一个调度器，而这个调度器因为处理的消息特别多,所以单独开了一个线程(HandlerThread,这个类创建线程自带一个Looper，否则还要自己搞个Looper,怪麻烦的)，调度器就在这个HandlerThread在的线程,线程之间通信就是Handler,Message机制了
#### 未完待续
